最初の問題はコードにエラーリカバリを追加します。つまり、入力されたコマンドにエラーがあった場合にプログラムがクラッシュすることはない。次の問題は入力されたコマンドを表示する機能を追加する。

この例はもともとはウェブ版のシェルです。この章のコードは実行できないため、コードを少し修正しました。つまり、シェル出力の内容をファイルに書き込みます。

例外処理コードがないから、元のプログラムがクラッシュします。したがって、例外処理コードを関数runningのcase文の部分に追加したら、プログラムはクラッシュしません。コードの１６行から１９行まで、入力したデータを解析できない場合、ファイルにInvaild inputを書き込んで、改めて関数runningを起動します。

今まで入力されたコマンドを表示したい場合、client　プロセスにメッセージ　showOldCommand　を渡します。コードの２１行から２４行までは　clientプロセスがメッセージ　showOldCommandをもらったとき行うの処理。先にETS表の全てのデータを揃いて、serverプロセスに渡します。serverプロセスがこのメッセージを受け取ったとき、これらのコマンドをファイルに書き込みます。
